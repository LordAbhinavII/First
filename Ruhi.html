<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sofia üíñ My Valentine</title>
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', sans-serif;
    min-height: 100vh;
    background: linear-gradient(45deg, #ffcfe0, #ffd6eb, #ffe0f0);
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    animation: bgPulse 10s infinite alternate;
}

@keyframes bgPulse {
    0% { background: linear-gradient(45deg, #ffcfe0, #ffd6eb); }
    100% { background: linear-gradient(45deg, #ffd6eb, #ffe0f0); }
}

.card {
    width: 100%;
    max-width: 450px;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 30px;
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(255, 75, 92, 0.3);
    position: relative;
    border: 8px solid white;
}

.heart-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="%23ff4b5c" opacity="0.1" d="M50,85 C30,65 15,50 15,30 C15,15 30,5 50,5 C70,5 85,15 85,30 C85,50 70,65 50,85 Z"/></svg>');
    background-size: 100px;
    z-index: 0;
}

.content {
    position: relative;
    z-index: 1;
    padding: 30px;
}

.header {
    text-align: center;
    margin-bottom: 25px;
    padding-bottom: 20px;
    border-bottom: 3px dashed #ff4b5c;
}

h1 {
    color: #ff4b5c;
    font-size: 36px;
    margin-bottom: 10px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
}

.heart {
    color: #ff4b5c;
    animation: heartbeat 1.5s infinite;
    display: inline-block;
}

@keyframes heartbeat {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.photo-section {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin: 25px 0;
    flex-wrap: wrap;
}

.photo-frame {
    width: 45%;
    height: 180px;
    border-radius: 20px;
    overflow: hidden;
    border: 5px solid #ff4b5c;
    box-shadow: 0 10px 25px rgba(255, 75, 92, 0.3);
    background: linear-gradient(45deg, #ffcfe0, #fff0f5);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}

.photo-frame img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.photo-frame .fallback {
    display: flex;
    flex-direction: column;
    align-items: center;
    color: #ff4b5c;
    font-size: 14px;
    text-align: center;
    padding: 20px;
}

.photo-frame .fallback span {
    font-size: 40px;
    margin-bottom: 10px;
}

.message-box {
    background: linear-gradient(45deg, #fff5f7, #fff0f5);
    padding: 25px;
    border-radius: 20px;
    margin: 25px 0;
    text-align: center;
    border: 2px solid #ffcfe0;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.message {
    font-size: 20px;
    color: #ff4b5c;
    margin-bottom: 15px;
    line-height: 1.5;
}

.countdown {
    background: linear-gradient(45deg, #ff4b5c, #ff758c);
    color: white;
    padding: 15px;
    border-radius: 20px;
    text-align: center;
    font-size: 18px;
    font-weight: bold;
    margin: 25px 0;
    box-shadow: 0 8px 20px rgba(255, 75, 92, 0.4);
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.02); }
}

.cats {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin: 25px 0;
}

.cat-gif {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid #ff4b5c;
    animation: float 3s infinite ease-in-out;
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
}

.buttons {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 30px;
    position: relative;
    min-height: 120px;
}

.btn {
    padding: 18px 35px;
    font-size: 20px;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s;
    min-width: 160px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    position: relative;
    overflow: hidden;
}

.btn:before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: 0.5s;
}

.btn:hover:before {
    left: 100%;
}

.btn-yes {
    background: linear-gradient(45deg, #ff4b5c, #ff758c);
    color: white;
    z-index: 2;
}

.btn-yes:hover {
    transform: translateY(-5px) scale(1.05);
    box-shadow: 0 15px 30px rgba(255, 75, 92, 0.5);
}

.btn-no {
    background: linear-gradient(45deg, #888, #aaa);
    color: white;
    position: absolute;
}

.btn-no:hover {
    transform: translateY(-5px);
}

.letter {
    background: white;
    padding: 25px;
    border-radius: 20px;
    margin: 25px 0;
    border: 2px solid #ffcfe0;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    text-align: left;
    line-height: 1.8;
    font-style: italic;
    max-height: 300px;
    overflow-y: auto;
}

.music-control {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 60px;
    height: 60px;
    background: linear-gradient(45deg, #ff4b5c, #ff758c);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 10px 30px rgba(255, 75, 92, 0.5);
    z-index: 1000;
    border: 3px solid white;
    font-size: 28px;
    color: white;
    animation: bounce 2s infinite;
}

@keyframes bounce {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.music-control.muted {
    background: linear-gradient(45deg, #888, #aaa);
    animation: none;
}

#finalScreen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(45deg, #ff4b5c, #ff758c);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    padding: 20px;
}

.final-content {
    background: white;
    padding: 50px;
    border-radius: 40px;
    text-align: center;
    max-width: 90%;
    animation: celebrate 1s ease;
    box-shadow: 0 30px 60px rgba(0, 0, 0, 0.4);
}

@keyframes celebrate {
    0% { transform: scale(0); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}

.final-heart {
    font-size: 80px;
    animation: heartbeat 1s infinite;
    margin: 20px 0;
}

.confetti {
    position: fixed;
    width: 15px;
    height: 15px;
    animation: confettiFall 3s linear forwards;
    z-index: 9999;
}

@keyframes confettiFall {
    0% { 
        transform: translateY(-100px) rotate(0deg);
        opacity: 1;
    }
    100% { 
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
    }
}

.firework {
    position: fixed;
    font-size: 40px;
    animation: fireworkPop 1s ease-out forwards;
    z-index: 9998;
}

@keyframes fireworkPop {
    0% { transform: scale(0); opacity: 1; }
    50% { transform: scale(1.2); opacity: 1; }
    100% { transform: scale(1.5); opacity: 0; }
}
</style>
</head>
<body>

<div class="card" id="card">
    <div class="heart-bg"></div>
    <!-- Content will be loaded here -->
</div>

<div id="finalScreen">
    <div class="final-content">
        <h1 style="color: #ff4b5c; font-size: 48px; margin-bottom: 20px;">SOFIA üíñ</h1>
        <p style="font-size: 28px; margin: 20px 0; color: #333;">You said YES! üéâ</p>
        <div class="final-heart">üíù</div>
        <p style="font-size: 24px; margin: 20px 0; color: #666;">Come here for the biggest hug! ü´Ç</p>
        <p style="font-size: 20px; margin: 20px 0; color: #888;">You're officially my Valentine now! üòò</p>
    </div>
</div>

<div class="music-control" id="musicBtn" onclick="toggleMusic()">
    <span id="musicIcon">üéµ</span>
</div>

<script>
// ============================================
// MUSIC SECTION - Using Base64 encoded audio
// ============================================
// This is a short sample of romantic music encoded in Base64
// It will play automatically when user clicks anywhere
const audioContext = new (window.AudioContext || window.webkitAudioContext)();
let isPlaying = false;
let audioSource = null;

// Predefined array of audio URLs - tries multiple sources
const audioSources = [
    'samjhawan.mp3',
    'samjhawan.ogg',
    'song.mp3',
    'music.mp3',
    'valentine.mp3',
    'https://assets.mixkit.co/music/preview/mixkit-romantic-sunset-693.mp3',
    'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3'
];

function playMusic() {
    if (isPlaying) return;
    
    // Try to play from local files first
    for (let source of audioSources) {
        const audio = new Audio();
        audio.volume = 0.5;
        audio.loop = true;
        
        // Add event listeners
        audio.oncanplay = function() {
            audio.play().then(() => {
                isPlaying = true;
                document.getElementById('musicIcon').textContent = 'üéµ';
                console.log('Playing music from:', source);
            }).catch(e => {
                console.log('Could not play from', source, e);
                audio.src = ''; // Clear to try next
            });
        };
        
        audio.onerror = function() {
            console.log('Error loading:', source);
        };
        
        // Try this source
        audio.src = source;
        
        // Check if it starts loading
        audio.load();
        
        // Wait a bit to see if it works
        setTimeout(() => {
            if (!isPlaying) {
                audio.src = '';
            }
        }, 1000);
        
        // If we found a working source, break
        if (isPlaying) break;
    }
    
    if (!isPlaying) {
        // Fallback: Create a simple tune using Web Audio API
        createSimpleMusic();
    }
}

function createSimpleMusic() {
    try {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        oscillator.type = 'sine';
        oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
        gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
        
        oscillator.start();
        isPlaying = true;
        document.getElementById('musicIcon').textContent = 'üéµ';
        
        // Store for later control
        audioSource = { oscillator, gainNode };
        
        // Create a simple melody
        setTimeout(() => {
            oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 1); // E5
        }, 1000);
        setTimeout(() => {
            oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 2); // G5
        }, 2000);
        
    } catch (e) {
        console.log('Web Audio API not supported');
    }
}

function toggleMusic() {
    const musicBtn = document.getElementById('musicBtn');
    const icon = document.getElementById('musicIcon');
    
    if (isPlaying) {
        // Stop all audio
        if (audioSource) {
            audioSource.oscillator.stop();
            audioSource = null;
        }
        // Stop any HTML5 audio
        document.querySelectorAll('audio').forEach(audio => {
            audio.pause();
            audio.currentTime = 0;
        });
        isPlaying = false;
        icon.textContent = 'üîá';
        musicBtn.classList.add('muted');
    } else {
        playMusic();
        musicBtn.classList.remove('muted');
    }
}

// ============================================
// IMAGE HANDLING
// ============================================
// List of local image files to try
const localImages = ['pic1.jpg', 'pic2.jpg', 'pic5.jpg', 'pic4.jpg', 'pic6.jpg'];
// Fallback images (online)
const fallbackImages = [
    'https://images.unsplash.com/photo-1518568814500-bf0f8d125f46?w=400&h=300&fit=crop',
    'https://images.unsplash.com/photo-1511988617509-a57c8a288659?w=400&h=300&fit=crop',
    'https://images.unsplash.com/photo-1518020382113-a7e8fc38eac9?w=400&h=300&fit=crop',
    'https://images.unsplash.com/photo-1514888286974-6d03bde4ba4?w=400&h=300&fit=crop',
    'https://images.unsplash.com/photo-1533738363-b7f9aef128ce?w=400&h=300&fit=crop'
];

function getImage(index) {
    // Try local image first
    return localImages[index] || fallbackImages[index % fallbackImages.length];
}

// ============================================
// PAGES
// ============================================
let currentPage = 1;

function renderPage() {
    const card = document.getElementById('card');
    
    if (currentPage === 1) {
        card.innerHTML = `
            <div class="content">
                <div class="header">
                    <h1>For My Sofia <span class="heart">üíñ</span></h1>
                    <p style="color: #ff758c; font-size: 18px;">You make my world brighter ‚ú®</p>
                </div>
                
                <div class="photo-section">
                    <div class="photo-frame">
                        <img src="${getImage(3)}" alt="Photo 1" onerror="this.onerror=null; this.style.display='none'; this.parentElement.innerHTML='<div class=\"fallback\"><span>üì∑</span>Photo 1</div>';">
                    </div>
                    <div class="photo-frame">
                        <img src="${getImage(4)}" alt="Photo 2" onerror="this.onerror=null; this.style.display='none'; this.parentElement.innerHTML='<div class=\"fallback\"><span>üì∏</span>Photo 2</div>';">
                    </div>
                </div>
                
                <div class="cats">
                    <img src="https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif" class="cat-gif" alt="Cat">
                    <img src="https://media.giphy.com/media/mlvseq9yvZhba/giphy.gif" class="cat-gif" alt="Cat">
                    <img src="https://media.giphy.com/media/3oriO0OEd9QIDdllqo/giphy.gif" class="cat-gif" alt="Cat">
                </div>
                
                <div class="message-box">
                    <p class="message">Every day with you feels like Valentine's Day üíù</p>
                    <p class="message">Will you be mine? üòä</p>
                </div>
                
                <div class="countdown" id="countdown">
                    üíù Counting down to our special day...
                </div>
                
                <div class="buttons">
                    <button class="btn btn-yes" onclick="nextPage()">YES! üòç</button>
                    <button class="btn btn-no" onmouseover="moveNo(this)">Maybe? ü§î</button>
                </div>
            </div>
        `;
    }
    else if (currentPage === 2) {
        card.innerHTML = `
            <div class="content">
                <div class="header">
                    <h1>Wait! <span class="heart">‚ù§Ô∏è</span></h1>
                    <p style="color: #ff954b; font-size: 18px;">Think about it... ü•∞</p>
                </div>
                
                <div class="photo-section">
                    <div class="photo-frame" style="width: 80%;">
                        <img src="${getImage(1)}" alt="Special Photo" onerror="this.onerror=null; this.style.display='none'; this.parentElement.innerHTML='<div class=\"fallback\"><span>üíñ</span>Our Moment</div>';">
                    </div>
                </div>
                
                <div class="message-box">
                    <p class="message">My heart skips a beat every time I think of you üíì</p>
                    <p class="message">Are you really sure about your answer? ü§ó</p>
                </div>
                
                <div class="cats">
                    <img src="https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif" class="cat-gif" alt="Cat">
                    <img src="https://media.giphy.com/media/mlvseq9yvZhba/giphy.gif" class="cat-gif" alt="Cat">
                </div>
                
                <div class="buttons">
                    <button class="btn btn-yes" onclick="nextPage()">Absolutely Sure! üíï</button>
                    <button class="btn btn-no" onmouseover="moveNo(this)">Let me think... üßê</button>
                </div>
            </div>
        `;
    }
    else if (currentPage === 3) {
        card.innerHTML = `
            <div class="content">
                <div class="header">
                    <h1>My Heart's Message <span class="heart">üíå</span></h1>
                    <p style="color: #4b7bff; font-size: 18px;">Just for you... üìù</p>
                </div>
                
                <div class="photo-section">
                    <div class="photo-frame" style="width: 80%;">
                        <img src="${getImage(2)}" alt="Last Photo" onerror="this.onerror=null; this.style.display='none'; this.parentElement.innerHTML='<div class=\"fallback\"><span>üíå</span>For You</div>';">
                    </div>
                </div>
                
                <div class="letter" id="letter">
                    <!-- Letter will be typed here -->
                </div>
                
                <div class="message-box">
                    <p class="message">So... what do you say? üôà</p>
                    <p class="message" style="font-weight: bold; font-size: 22px;">Will you be my Valentine? üíñ</p>
                </div>
                
                <div class="buttons">
                    <button class="btn btn-yes" onclick="showFinal()">YES, I WILL! üíù</button>
                    <button class="btn btn-no" onmouseover="moveNo(this)">Still deciding... ü§∑‚Äç‚ôÄÔ∏è</button>
                </div>
            </div>
        `;
        
        setTimeout(typeLetter, 500);
    }
    
    updateCountdown();
}

function typeLetter() {
    const text = `Dear Sofia,

From the moment we met, you've brought so much joy into my life.
Your smile lights up my world, your laughter is my favorite melody,
and your kindness touches my heart in ways I can't describe.

Every moment with you feels special.
Whether we're talking for hours or sitting in comfortable silence,
being with you just feels... right.

You're beautiful inside and out,
and I feel incredibly lucky to know you.
Life is simply better with you in it.

With all my heart,
Someone who cares about you deeply üíï`;
    
    const letter = document.getElementById('letter');
    if (!letter) return;
    
    letter.innerHTML = '';
    let i = 0;
    
    function typeNext() {
        if (i < text.length) {
            letter.innerHTML += text.charAt(i);
            i++;
            setTimeout(typeNext, 30);
        }
    }
    
    typeNext();
}

function moveNo(button) {
    const container = button.closest('.buttons');
    const maxX = container.offsetWidth - button.offsetWidth - 20;
    const maxY = container.offsetHeight - button.offsetHeight - 20;
    
    const x = Math.random() * maxX;
    const y = Math.random() * maxY;
    
    button.style.left = x + 'px';
    button.style.top = y + 'px';
}

function nextPage() {
    currentPage++;
    if (currentPage > 3) currentPage = 1;
    renderPage();
}

function showFinal() {
    const finalScreen = document.getElementById('finalScreen');
    finalScreen.style.display = 'flex';
    
    // Start music if not already playing
    playMusic();
    
    // Create celebration effects
    createConfetti();
    createFireworks();
}

function createConfetti() {
    const colors = ['#ff4b5c', '#4b7bff', '#ff954b', '#4bff7b', '#ff4bff', '#ffeb3b'];
    
    for (let i = 0; i < 200; i++) {
        setTimeout(() => {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.width = (Math.random() * 15 + 5) + 'px';
            confetti.style.height = (Math.random() * 15 + 5) + 'px';
            confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
            confetti.style.animationDuration = (Math.random() * 2 + 3) + 's';
            document.body.appendChild(confetti);
            
            setTimeout(() => confetti.remove(), 3000);
        }, i * 20);
    }
}

function createFireworks() {
    const fireworks = ['üéÜ', 'üéá', '‚ú®', 'üéä', 'üéâ', 'üíñ', '‚ù§Ô∏è', 'üíù', 'üíï', 'üí•'];
    
    setInterval(() => {
        for (let i = 0; i < 3; i++) {
            setTimeout(() => {
                const firework = document.createElement('div');
                firework.className = 'firework';
                firework.innerHTML = fireworks[Math.floor(Math.random() * fireworks.length)];
                firework.style.left = (Math.random() * 80 + 10) + 'vw';
                firework.style.top = (Math.random() * 80 + 10) + 'vh';
                document.body.appendChild(firework);
                
                setTimeout(() => firework.remove(), 1000);
            }, i * 200);
        }
    }, 800);
}

function updateCountdown() {
    const now = new Date();
    let valentineYear = now.getFullYear();
    let valentineDate = new Date(valentineYear, 1, 14, 23, 59, 59);
    
    // If Valentine's has passed, use next year
    if (now > valentineDate) {
        valentineDate = new Date(valentineYear + 1, 1, 14, 23, 59, 59);
    }
    
    const diff = valentineDate - now;
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
    const minutes = Math.floor((diff / (1000 * 60)) % 60);
    const seconds = Math.floor((diff / 1000) % 60);
    
    const countdownEl = document.getElementById('countdown');
    if (countdownEl) {
        countdownEl.innerHTML = `üíù Only ${days} days, ${hours} hours, ${minutes} minutes, ${seconds} seconds until Valentine's! üíù`;
    }
}

// ============================================
// INITIALIZATION
// ============================================
// Start on page load
renderPage();

// Update countdown every second
setInterval(updateCountdown, 1000);

// Start music on first click
document.addEventListener('click', function startOnClick() {
    playMusic();
    document.removeEventListener('click', startOnClick);
}, { once: true });

// Try to auto-start music after 2 seconds
setTimeout(playMusic, 2000);

// Instructions for user
console.log("üíù Valentine's Day Message for Sofia üíù");
console.log("Click the music button üéµ in the bottom right if you don't hear music!");
console.log("Click 'YES' buttons to proceed!");
console.log("Enjoy! üíñ");
</script>
</body>
</html>